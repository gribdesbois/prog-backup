<!DOCTYPE html>
<html class=" js csstransforms csstransforms3d csstransitions" lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="https://techwithtim.net/xmlrpc.php">  <script type="text/javascript" async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/analytics.js"></script><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/js.js"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129383985-3');</script> <script>function clicked()
{
    alert("Subscriptions coming soon...");
}</script><link media="all" href="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/autoptimize_9b33a2bc2c229b551f29f03b9ceea0dc.css" rel="stylesheet"><title>Python Pygame Tetris Tutorial #4 - techwithtim.net</title><meta name="description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><link rel="canonical" href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Python Pygame Tetris Tutorial #4 - techwithtim.net"><meta property="og:description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta property="og:url" content="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/"><meta property="og:site_name" content="techwithtim.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta name="twitter:title" content="Python Pygame Tetris Tutorial #4 - techwithtim.net"><meta name="twitter:site" content="@TechWithTimm"><meta name="twitter:creator" content="@TechWithTimm"> <script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://techwithtim.net/#website","url":"https://techwithtim.net/","name":"techwithtim.net","inLanguage":"en-US","description":"Programming &amp; Tech Tutorials","publisher":{"@id":"https://techwithtim.net/#/schema/person/"},"potentialAction":[{"@type":"SearchAction","target":"https://techwithtim.net/?s={search_term_string}","query-input":"required name=search_term_string"}]},{"@type":"WebPage","@id":"https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/#webpage","url":"https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/","name":"Python Pygame Tetris Tutorial #4 - techwithtim.net","isPartOf":{"@id":"https://techwithtim.net/#website"},"inLanguage":"en-US","datePublished":"2018-12-04T03:17:54+00:00","dateModified":"2019-01-18T01:55:04+00:00","description":"Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net.","potentialAction":[{"@type":"ReadAction","target":["https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/"]}]}]}</script> <link rel="dns-prefetch" href="https://fonts.googleapis.com/"><link rel="dns-prefetch" href="https://s.w.org/"><link rel="alternate" type="application/rss+xml" title="techwithtim.net » Feed" href="https://techwithtim.net/feed/"><link rel="alternate" type="application/rss+xml" title="techwithtim.net » Comments Feed" href="https://techwithtim.net/comments/feed/"> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/techwithtim.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3.2"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);</script><script src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/wp-emoji-release.js" type="text/javascript" defer="defer"></script> <link rel="stylesheet" id="simpel-title-font-css" href="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/css.css" type="text/css" media="all"><link rel="stylesheet" id="simpel-body-font-css" href="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/css.css" type="text/css" media="all"> <script type="text/javascript" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/jquery.js"></script> <script type="text/javascript">var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/techwithtim.net\/wp-admin\/admin-ajax.php"};</script> <link rel="https://api.w.org/" href="https://techwithtim.net/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://techwithtim.net/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://techwithtim.net/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 5.3.2"><link rel="shortlink" href="https://techwithtim.net/?p=251"><link rel="alternate" type="application/json+oembed" href="https://techwithtim.net/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechwithtim.net%2Ftutorials%2Fgame-development-with-python%2Ftetris-pygame%2Ftutorial-4%2F"><link rel="alternate" type="text/xml+oembed" href="https://techwithtim.net/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechwithtim.net%2Ftutorials%2Fgame-development-with-python%2Ftetris-pygame%2Ftutorial-4%2F&amp;format=xml"><style type="text/css">.header-image {
			background: url(https://techwithtim.net/wp-content/uploads/2020/02/cropped-Webp.net-resizeimage.png) no-repeat 50% 50%;
			-webkit-background-size: cover;
			-moz-background-size:    cover;
			-o-background-size:      cover;
			background-size:         cover;
		}

		@media screen and (min-width: 59.6875em) {
			body:before {
				background: url(https://techwithtim.net/wp-content/uploads/2020/02/cropped-Webp.net-resizeimage.png) no-repeat 100% 50%;
				-webkit-background-size: cover;
				-moz-background-size:    cover;
				-o-background-size:      cover;
				background-size:         cover;
				border-right: 0;
			}

			.site-header {
				background: transparent;
			}
		}</style><link rel="icon" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-32x32.png" sizes="32x32"><link rel="icon" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-192x192.png" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-180x180.png"><meta name="msapplication-TileImage" content="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-270x270.png"><link rel="stylesheet" href="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous"><meta name="google-site-verification" content="Klz-majLq2UU1MPxJLTwwrCBRgin6tHkBkqiIx8eaPA"></head><body class="page-template-default page page-id-251 page-child parent-pageid-195 fts-powered-by-text-popup"><div class="slicknav_menu"><a href="#" aria-haspopup="true" tabindex="0" class="slicknav_btn slicknav_collapsed"><span class="slicknav_menutxt">MENU</span><span class="slicknav_icon"><span class="slicknav_icon-bar"></span><span class="slicknav_icon-bar"></span><span class="slicknav_icon-bar"></span></span></a><ul class="slicknav_nav slicknav_hidden" aria-expanded="false" style="display: none;" aria-hidden="true" role="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://techwithtim.net/" role="menuitem" tabindex="-1">Home</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-25"><a title="tutorials" href="https://techwithtim.net/tutorials/" role="menuitem" tabindex="-1">Tutorials</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-28"><a title="community" href="https://techwithtim.net/community/" role="menuitem" tabindex="-1">Community</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2262"><a href="https://techwithtim.net/gear/" role="menuitem" tabindex="-1">My Gear</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3153"><a href="https://teespring.com/stores/tims-store-23" role="menuitem" tabindex="-1">Shop</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a title="support" href="https://techwithtim.net/support-donate/" role="menuitem" tabindex="-1">Support/Donate</a></li></ul></div><nav id="site-navigation" class="main-navigation" role="navigation"><div class="container"> <button class="menu-toggle" aria-controls="menu" aria-expanded="false">Primary Menu</button><div class="menu-main-container"><ul id="menu-main" class="menu nav-menu" aria-expanded="false"><li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://techwithtim.net/">Home</a></li><li id="menu-item-25" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-25"><a title="tutorials" href="https://techwithtim.net/tutorials/">Tutorials</a></li><li id="menu-item-28" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-28"><a title="community" href="https://techwithtim.net/community/">Community</a></li><li id="menu-item-2262" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2262"><a href="https://techwithtim.net/gear/">My Gear</a></li><li id="menu-item-3153" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3153"><a href="https://teespring.com/stores/tims-store-23">Shop</a></li><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a title="support" href="https://techwithtim.net/support-donate/">Support/Donate</a></li></ul></div></div></nav><header id="masthead" class="site-header" role="banner"><div class="header-image"><div class="site-branding container"><div id="text-title-desc"><h1 class="site-title title-font"><a href="https://techwithtim.net/" rel="home">techwithtim.net</a></h1><h2 class="site-description">Programming &amp; Tech Tutorials</h2></div></div><div class="search-wrapper"><div class="container"><div id="search-top" class="col-lg-6 col-md-6 col-sm-12 col-xs-12"><form method="get" id="searchform" action="https://techwithtim.net/"><div><input type="text" size="18" name="s" id="s"> <button type="submit" class="search-submit"> <i class="fa fa-search"></i> </button></div></form></div><div id="social-icons" class="col-md-6 col-s-6 col-xs-12"> <a href="https://www.youtube.com/techwithtim"><i class="social-icon fa fa-youtube"></i></a> <a href="https://twitter.com/TechWithTimm"><i class="social-icon fa fa-twitter"></i></a></div></div></div></div></header><div id="page" class="hfeed site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="content" class="site-content container"><div id="primary-mono" class="content-area col-md-8"><main id="main" class="site-main" role="main"><article id="post-251" class="post-251 page type-page status-publish hentry"><header class="entry-header"><h1 class="entry-title">Tutorial #4</h1></header><div class="entry-content"><div class="youtube-subscribe-bar-container"><div class="embed-container"><iframe src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/VgBnkkPlEVI.html" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" width="640" height="360" frameborder="0"></iframe></div><div class="youtube-subscribe-bar" style="color: #ffffff;background-color: #1b1b1b;"><div>Subscribe to Tech With Tim!</div><div><iframe src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/subscribe_embed.html"></iframe></div><div class="clear"></div></div></div><h3>Increasing the Difficulty</h3><p>As
 time goes on we probably would like to make the game more difficult. To
 do this we will simply increase the speed at which the pieces fall down
 the screen.</p><p>First we need to add the variable <strong>level_time = 0</strong> into our <strong>main()</strong> function above the while loop.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
<span style="color: #8f5902; font-style: italic;"># Inside the main function above the while loop</span>
</pre></div><p>Now at the top of our while loop inside the <strong>main()</strong> function we will add the following.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
    <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_rawtime</span><span style="color: #000000; font-weight: bold;">()</span>

    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">level_time</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">1000</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">5</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">0.12</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">0.005</span>

    <span style="color: #ce5c00; font-weight: bold;">...</span>
</pre></div><h3>Adding Score</h3><p>We will implement a very simple 
scoring system that simply gives the player 10 points each time they 
clear a row. We will later be saving this score and displaying the best 
score for the player as well. This means we need to define <strong>score = 0</strong> and <strong>last_score = max_score()</strong> at the top of our main() function. Then we need to make a slight modification to our <strong>clear_rows()</strong> function so that it returns how many rows were cleared. Then when we are calling <strong>clear_rows()</strong> from within the main() function we will simply do score += clear_rows() * 10 so that it adds the returned value to our score.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
<span style="color: #000000;">last_score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">()</span> <span style="color: #8f5902; font-style: italic;"># will will create this function later</span>
</pre></div><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">clear_rows</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">gird</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">locked</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #ce5c00; font-weight: bold;">...</span>
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">inc</span> <span style="color: #8f5902; font-style: italic;"># add this to the bottom of the function</span>
</pre></div><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #ce5c00; font-weight: bold;">...</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">change_piece</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">p</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">],</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">])</span>
                <span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">p</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span>
            <span style="color: #000000;">current_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">next_piece</span>
            <span style="color: #000000;">next_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
            <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clear_rows</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #ce5c00; font-weight: bold;">*</span> <span style="color: #0000cf; font-weight: bold;">10</span> <span style="color: #8f5902; font-style: italic;"># NEW</span>
        <span style="color: #ce5c00; font-weight: bold;">...</span>
</pre></div><p><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/adsbygoogle.js"></script><br> <ins class="adsbygoogle" style="display: block; text-align: center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="1147887376"></ins><br> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p><h3>Displaying the Score</h3><p>We are going to be displaying the current and best score from within the <strong>draw_window()</strong>
 function. This means we must somehow pass the scores there. To do this 
we will add two parameters to draw_window() and we will add two 
arguments to our call statement.</p><p>The <strong>draw_window()</strong> function should now look like this.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_window</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">score</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">last_score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">fill</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">init</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'comicsans'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">60</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Tetris'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">/</span> <span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_width</span><span style="color: #000000; font-weight: bold;">()</span> <span style="color: #ce5c00; font-weight: bold;">/</span> <span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #8f5902; font-style: italic;"># current score</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'comicsans'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Score: '</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">50</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">100</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">160</span><span style="color: #000000; font-weight: bold;">))</span>
    <span style="color: #8f5902; font-style: italic;"># last score</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'High Score: '</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">last_score</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">200</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">200</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">160</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">])):</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rect</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">],</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rect</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">top_left_y</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">play_width</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">play_height</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">5</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">draw_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)</span>
</pre></div><p>Now when we call <strong>draw_window()</strong> we must add the two new arguments.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #000000;">draw_window</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">last_score</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #8f5902; font-style: italic;"># Modify this from within the main() function so that</span>
<span style="color: #8f5902; font-style: italic;"># it has score and last_score as arguments</span>
</pre></div><h3>draw_text_middle()</h3><p>This function is going to aid 
us in displaying text to the middle of the screen and will used for when
 we create a main menu and end screen for our game.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">text</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">color</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">"comicsans"</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">bold</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #3465a4;">True</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">text</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">color</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_width</span><span style="color: #000000; font-weight: bold;">()</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_height</span><span style="color: #000000; font-weight: bold;">()</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">))</span>
</pre></div><p><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/adsbygoogle.js"></script><br> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="1147887376"></ins><br> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p><h3>Losing the Game</h3><p>Right
 now when we loose the game we simply quit the program. However, we want
 to first tell the user they lost and then prompt them to play again. 
Inside our <strong>main()</strong> function inside the while loop we will add some lines into the block of code below.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #ce5c00; font-weight: bold;">...</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">check_lost</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">"YOU LOST!"</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">80</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">update</span><span style="color: #000000; font-weight: bold;">()</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">time</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">delay</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">1500</span><span style="color: #000000; font-weight: bold;">)</span>
            <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #000000;">update_score</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #8f5902; font-style: italic;"># We will create this function later</span>
</pre></div><h3>Creating a Main Menu</h3><p>We are now going to create a
 main menu so that when the game is first launched the user can press a 
button to start the game. This main menu will also show up when the user
 looses the game allowing them to play again.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main_menu</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">):</span>  <span style="color: #8f5902; font-style: italic;"># *</span>
    <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>
    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">win</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">fill</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'Press Any Key To Play'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">60</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">update</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">event</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get</span><span style="color: #000000; font-weight: bold;">():</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">QUIT</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">KEYDOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">quit</span><span style="color: #000000; font-weight: bold;">()</span>
</pre></div><p>Now instead of calling <strong>main()</strong> to start the game we will call <strong>main_menu()</strong>.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #000000;">main_menu</span><span style="color: #000000; font-weight: bold;">()</span>
</pre></div><h3>Saving Score</h3><p>To save the users best score we are 
going to update a text file each time the game is played. We will do 
this using two functions <strong>update_file() and <strong>max_score</strong>. </strong></p><p><strong>*IMPORTANT*</strong>
 Please create a new text file called scores.txt and type “0” on the 
first line. CLICK SAVE OR SAVE AS. If you do not do this the program 
will crash.</p><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">update_score</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">()</span>

    <span style="color: #204a87; font-weight: bold;">with</span> <span style="color: #204a87;">open</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'scores.txt'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'w'</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">as</span> <span style="color: #000000;">f</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87;">int</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">write</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #204a87; font-weight: bold;">else</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">write</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">))</span>
</pre></div><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">with</span> <span style="color: #204a87;">open</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'scores.txt'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'r'</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">as</span> <span style="color: #000000;">f</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">lines</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">readlines</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">lines</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">]</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">strip</span><span style="color: #000000; font-weight: bold;">()</span>

    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">score</span>
</pre></div><p><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/adsbygoogle.js"></script><br> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="1147887376"></ins><br> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p><h3>Full Code</h3><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">import</span> <span style="color: #000000;">pygame</span>
<span style="color: #204a87; font-weight: bold;">import</span> <span style="color: #000000;">random</span>

<span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">init</span><span style="color: #000000; font-weight: bold;">()</span>

<span style="color: #8f5902; font-style: italic;"># GLOBALS VARS</span>
<span style="color: #000000;">s_width</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">800</span>
<span style="color: #000000;">s_height</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">700</span>
<span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">300</span>  <span style="color: #8f5902; font-style: italic;"># meaning 300 // 10 = 30 width per block</span>
<span style="color: #000000;">play_height</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">600</span>  <span style="color: #8f5902; font-style: italic;"># meaning 600 // 20 = 30 height per block</span>
<span style="color: #000000;">block_size</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">30</span>

<span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">s_width</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000;">play_width</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #ce5c00; font-weight: bold;">//</span> <span style="color: #0000cf; font-weight: bold;">2</span>
<span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">s_height</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000;">play_height</span>


<span style="color: #8f5902; font-style: italic;"># SHAPE FORMATS</span>

<span style="color: #000000;">S</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'...0.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">Z</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.0...'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">I</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'0000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">O</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">J</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.0...'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'...0.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">L</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'...0.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.0...'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">T</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..00.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.000.'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">],</span>
     <span style="color: #000000; font-weight: bold;">[</span><span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.00..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'..0..'</span><span style="color: #000000; font-weight: bold;">,</span>
      <span style="color: #4e9a06;">'.....'</span><span style="color: #000000; font-weight: bold;">]]</span>

<span style="color: #000000;">shapes</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">S</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">Z</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">I</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">O</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">J</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">L</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">T</span><span style="color: #000000; font-weight: bold;">]</span>
<span style="color: #000000;">shape_colors</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">165</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">)]</span>
<span style="color: #8f5902; font-style: italic;"># index 0 - 6 represent shape</span>


<span style="color: #204a87; font-weight: bold;">class</span> <span style="color: #000000;">Piece</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">object</span><span style="color: #000000; font-weight: bold;">):</span>  <span style="color: #8f5902; font-style: italic;"># *</span>
    <span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">__init__</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #3465a4;">self</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #3465a4;">self</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">x</span>
        <span style="color: #3465a4;">self</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">y</span>
        <span style="color: #3465a4;">self</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape</span>
        <span style="color: #3465a4;">self</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape_colors</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">shapes</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">index</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)]</span>
        <span style="color: #3465a4;">self</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">create_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_pos</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #000000; font-weight: bold;">{}):</span>  <span style="color: #8f5902; font-style: italic;"># *</span>
    <span style="color: #000000;">grid</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">_</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">10</span><span style="color: #000000; font-weight: bold;">)]</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">_</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">)]</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">])):</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">locked_pos</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">c</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">locked_pos</span><span style="color: #000000; font-weight: bold;">[(</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">)]</span>
                <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">c</span>
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">grid</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[]</span>
    <span style="color: #000000;">format</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">%</span> <span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)]</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">line</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">format</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">row</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #204a87;">list</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">column</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">column</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #4e9a06;">'0'</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">positions</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">append</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">4</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">positions</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">accepted_pos</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[(</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">10</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)]</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">)]</span>
    <span style="color: #000000;">accepted_pos</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">sub</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">accepted_pos</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">sub</span><span style="color: #000000; font-weight: bold;">]</span>

    <span style="color: #000000;">formatted</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">formatted</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">accepted_pos</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">False</span>
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">True</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">check_lost</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pos</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&lt;</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">True</span>

    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">False</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">Piece</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">5</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">random</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">choice</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shapes</span><span style="color: #000000; font-weight: bold;">))</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">text</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">color</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">"comicsans"</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">bold</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #3465a4;">True</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">text</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">color</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_width</span><span style="color: #000000; font-weight: bold;">()</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_height</span><span style="color: #000000; font-weight: bold;">()</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">))</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
        <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span><span style="color: #ce5c00; font-weight: bold;">+</span><span style="color: #000000;">play_width</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span><span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">])):</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span><span style="color: #000000; font-weight: bold;">),(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #000000; font-weight: bold;">))</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">clear_rows</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">locked</span><span style="color: #000000; font-weight: bold;">):</span>

    <span style="color: #000000;">inc</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)</span><span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">row</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">]</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">inc</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
            <span style="color: #000000;">ind</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">i</span>
            <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">)):</span>
                <span style="color: #204a87; font-weight: bold;">try</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #204a87; font-weight: bold;">del</span> <span style="color: #000000;">locked</span><span style="color: #000000; font-weight: bold;">[(</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">)]</span>
                <span style="color: #204a87; font-weight: bold;">except</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #204a87; font-weight: bold;">continue</span>

    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">inc</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">key</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">sorted</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">list</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000;">key</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #204a87; font-weight: bold;">lambda</span> <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">:</span> <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">])[::</span><span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">]:</span>
            <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">key</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&lt;</span> <span style="color: #000000;">ind</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">newKey</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">inc</span><span style="color: #000000; font-weight: bold;">)</span>
                <span style="color: #000000;">locked</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">newKey</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">locked</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">pop</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">key</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">inc</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_next_shape</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'comicsans'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Next Shape'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">50</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">100</span>
    <span style="color: #000000;">format</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">%</span> <span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)]</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">line</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">format</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">row</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #204a87;">list</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">column</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">column</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #4e9a06;">'0'</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rect</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">10</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">))</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">update_score</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">()</span>

    <span style="color: #204a87; font-weight: bold;">with</span> <span style="color: #204a87;">open</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'scores.txt'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'w'</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">as</span> <span style="color: #000000;">f</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87;">int</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">write</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #204a87; font-weight: bold;">else</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">write</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">nscore</span><span style="color: #000000; font-weight: bold;">))</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">with</span> <span style="color: #204a87;">open</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'scores.txt'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'r'</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">as</span> <span style="color: #000000;">f</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">lines</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">f</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">readlines</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">lines</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">]</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">strip</span><span style="color: #000000; font-weight: bold;">()</span>

    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">score</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_window</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">score</span><span style="color: #ce5c00; font-weight: bold;">=</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">last_score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">fill</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">init</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'comicsans'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">60</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Tetris'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">/</span> <span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_width</span><span style="color: #000000; font-weight: bold;">()</span> <span style="color: #ce5c00; font-weight: bold;">/</span> <span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #8f5902; font-style: italic;"># current score</span>
    <span style="color: #000000;">font</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">SysFont</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'comicsans'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Score: '</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #204a87;">str</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">50</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">2</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">100</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">160</span><span style="color: #000000; font-weight: bold;">))</span>
    <span style="color: #8f5902; font-style: italic;"># last score</span>
    <span style="color: #000000;">label</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">font</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">render</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'High Score: '</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">last_score</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">200</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">200</span>

    <span style="color: #000000;">surface</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">blit</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">label</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">160</span><span style="color: #000000; font-weight: bold;">))</span>

    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">])):</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rect</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">],</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">top_left_y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">block_size</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rect</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">top_left_x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">top_left_y</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">play_width</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">play_height</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #0000cf; font-weight: bold;">5</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">draw_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #8f5902; font-style: italic;">#pygame.display.update()</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">):</span>  <span style="color: #8f5902; font-style: italic;"># *</span>
    <span style="color: #000000;">last_score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">max_score</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">locked_positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">{}</span>
    <span style="color: #000000;">grid</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">create_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
    <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>
    <span style="color: #000000;">current_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">next_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">clock</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">time</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">Clock</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
    <span style="color: #000000;">fall_speed</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0.27</span>
    <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
    <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>

    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">grid</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">create_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_rawtime</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_rawtime</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">tick</span><span style="color: #000000; font-weight: bold;">()</span>

        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">level_time</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">1000</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">5</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">0.12</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">level_time</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">0.005</span>

        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">fall_time</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">1000</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #000000;">fall_speed</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
            <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">))</span> <span style="color: #204a87; font-weight: bold;">and</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>

        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">event</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get</span><span style="color: #000000; font-weight: bold;">():</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">QUIT</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
                <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">quit</span><span style="color: #000000; font-weight: bold;">()</span>

            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">KEYDOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_LEFT</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_RIGHT</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_DOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_UP</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>

        <span style="color: #000000;">shape_pos</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">)</span>

        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">)):</span>
            <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">]</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">y</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span>

        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">change_piece</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">p</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">],</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">])</span>
                <span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">p</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span>
            <span style="color: #000000;">current_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">next_piece</span>
            <span style="color: #000000;">next_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
            <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #000000;">score</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clear_rows</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #ce5c00; font-weight: bold;">*</span> <span style="color: #0000cf; font-weight: bold;">10</span>

        <span style="color: #000000;">draw_window</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">last_score</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #000000;">draw_next_shape</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">next_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">update</span><span style="color: #000000; font-weight: bold;">()</span>

        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">check_lost</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">"YOU LOST!"</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">80</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">update</span><span style="color: #000000; font-weight: bold;">()</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">time</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">delay</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">1500</span><span style="color: #000000; font-weight: bold;">)</span>
            <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #000000;">update_score</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">score</span><span style="color: #000000; font-weight: bold;">)</span>


<span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main_menu</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">):</span>  <span style="color: #8f5902; font-style: italic;"># *</span>
    <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>
    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">win</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">fill</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #000000;">draw_text_middle</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #4e9a06;">'Press Any Key To Play'</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #0000cf; font-weight: bold;">60</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">255</span><span style="color: #000000; font-weight: bold;">))</span>
        <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">update</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">event</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get</span><span style="color: #000000; font-weight: bold;">():</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">QUIT</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">KEYDOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">)</span>

    <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">quit</span><span style="color: #000000; font-weight: bold;">()</span>


<span style="color: #000000;">win</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">set_mode</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #000000;">s_width</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">s_height</span><span style="color: #000000; font-weight: bold;">))</span>
<span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">set_caption</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #4e9a06;">'Tetris'</span><span style="color: #000000; font-weight: bold;">)</span>
<span style="color: #000000;">main_menu</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">)</span>
</pre></div></div><footer class="entry-footer"></footer></article></main></div><div id="secondary" class="widget-area col-md-4" role="complementary"><aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://techwithtim.net/"> <label> <span class="screen-reader-text">Search for:</span> <input type="search" class="search-field" placeholder="Search …" name="s"> </label> <input type="submit" class="search-submit" value="Search"></form></aside><aside id="custom_html-11" class="widget_text widget widget_custom_html"><h1 class="widget-title">Enroll In My Course</h1><div class="textwidget custom-html-widget"><a href="https://tech-with-tim.teachable.com/p/the-fundamentals-of-programming-with-python"><h3 style="color: 	#FFA500">The Fundementals of Programming w/ Python</h3></a></div></aside><aside id="nav_menu-16" class="widget widget_nav_menu"><h1 class="widget-title">Tutorials</h1><div class="menu-tetris-tutorial-container"><ul id="menu-tetris-tutorial" class="menu"><li id="menu-item-610" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-610"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-1/">Tutorial #1</a></li><li id="menu-item-611" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-611"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/">Tutorial #2</a></li><li id="menu-item-612" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-612"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-3/">Tutorial #3</a></li><li id="menu-item-613" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-613"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/" aria-current="page">Tutorial #4</a></li></ul></div></aside><aside id="custom_html-9" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="2392953184"></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></aside></div></div></div><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info"> <a href="mailto:tim@techwithtim.net">Contact: tim@techwithtim.net</a> <a href="https://techwithtim.net/privacy-policy"> |  Privacy Policy  | </a> <a href="https://techwithtim.net/terms-of-service">Terms of Service</a></div></footer>  <script defer="defer" src="Python%20Pygame%20Tetris%20Tutorial%20%234%20-%20techwithtim.net_files/autoptimize_5d1d3b7ba95a7d784d590fa8ba2bd815.js"></script>
</body></html>
<!--Generated by Endurance Page Cache-->