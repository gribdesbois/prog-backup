<!DOCTYPE html>
<html class=" js csstransforms csstransforms3d csstransitions" lang="en-US"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="https://techwithtim.net/xmlrpc.php">  <script src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/osd.js"></script><script src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/show_ads_impl_fy2019.js" id="google_shimpl"></script><script type="text/javascript" async="" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/analytics.js"></script><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/js.js"></script> <script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129383985-3');</script> <script>function clicked()
{
    alert("Subscriptions coming soon...");
}</script><link media="all" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/autoptimize_2d928ffe2c61d5201ce21fd70a34a9c5.css" rel="stylesheet"><title>Python Pygame Tetris Tutorial #2 - techwithtim.net</title><meta name="description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><link rel="canonical" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/a_005.html"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Python Pygame Tetris Tutorial #2 - techwithtim.net"><meta property="og:description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta property="og:url" content="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/"><meta property="og:site_name" content="techwithtim.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net."><meta name="twitter:title" content="Python Pygame Tetris Tutorial #2 - techwithtim.net"><meta name="twitter:site" content="@TechWithTimm"><meta name="twitter:creator" content="@TechWithTimm"> <script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://techwithtim.net/#website","url":"https://techwithtim.net/","name":"techwithtim.net","inLanguage":"en-US","description":"Programming &amp; Tech Tutorials","publisher":{"@id":"https://techwithtim.net/#/schema/person/"},"potentialAction":[{"@type":"SearchAction","target":"https://techwithtim.net/?s={search_term_string}","query-input":"required name=search_term_string"}]},{"@type":"WebPage","@id":"https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/#webpage","url":"https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/","name":"Python Pygame Tetris Tutorial #2 - techwithtim.net","isPartOf":{"@id":"https://techwithtim.net/#website"},"inLanguage":"en-US","datePublished":"2018-12-04T03:16:21+00:00","dateModified":"2019-01-18T01:52:51+00:00","description":"Learn to create tetris in python using the pygame module. This pygame tetris tutorial is by Tech With Tim at techwithtim.net.","potentialAction":[{"@type":"ReadAction","target":["https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/"]}]}]}</script> <link rel="dns-prefetch" href="https://fonts.googleapis.com/"><link rel="dns-prefetch" href="https://s.w.org/"><link rel="alternate" type="application/rss+xml" title="techwithtim.net » Feed" href="https://techwithtim.net/feed/"><link rel="alternate" type="application/rss+xml" title="techwithtim.net » Comments Feed" href="https://techwithtim.net/comments/feed/"> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/techwithtim.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3.2"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);</script><script src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/wp-emoji-release.js" type="text/javascript" defer="defer"></script> <link rel="stylesheet" id="simpel-title-font-css" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/css.css" type="text/css" media="all"><link rel="stylesheet" id="simpel-body-font-css" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/css.css" type="text/css" media="all"> <script type="text/javascript" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/jquery.js"></script> <script type="text/javascript">var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/techwithtim.net\/wp-admin\/admin-ajax.php"};</script> <link rel="https://api.w.org/" href="https://techwithtim.net/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://techwithtim.net/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://techwithtim.net/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 5.3.2"><link rel="shortlink" href="https://techwithtim.net/?p=247"><link rel="alternate" type="application/json+oembed" href="https://techwithtim.net/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechwithtim.net%2Ftutorials%2Fgame-development-with-python%2Ftetris-pygame%2Ftutorial-2%2F"><link rel="alternate" type="text/xml+oembed" href="https://techwithtim.net/wp-json/oembed/1.0/embed?url=https%3A%2F%2Ftechwithtim.net%2Ftutorials%2Fgame-development-with-python%2Ftetris-pygame%2Ftutorial-2%2F&amp;format=xml"><style type="text/css">.header-image {
			background: url(https://techwithtim.net/wp-content/uploads/2020/02/cropped-Webp.net-resizeimage.png) no-repeat 50% 50%;
			-webkit-background-size: cover;
			-moz-background-size:    cover;
			-o-background-size:      cover;
			background-size:         cover;
		}

		@media screen and (min-width: 59.6875em) {
			body:before {
				background: url(https://techwithtim.net/wp-content/uploads/2020/02/cropped-Webp.net-resizeimage.png) no-repeat 100% 50%;
				-webkit-background-size: cover;
				-moz-background-size:    cover;
				-o-background-size:      cover;
				background-size:         cover;
				border-right: 0;
			}

			.site-header {
				background: transparent;
			}
		}</style><link rel="icon" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-32x32.png" sizes="32x32"><link rel="icon" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-192x192.png" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-180x180.png"><meta name="msapplication-TileImage" content="https://techwithtim.net/wp-content/uploads/2020/02/cropped-Tech-With-TimXL-270x270.png"><link rel="stylesheet" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous"><meta name="google-site-verification" content="Klz-majLq2UU1MPxJLTwwrCBRgin6tHkBkqiIx8eaPA"><link rel="preload" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/integrator_002.js" as="script"><script type="text/javascript" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/integrator_002.js"></script><link rel="preload" href="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/integrator.js" as="script"><script type="text/javascript" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/integrator.js"></script></head><body class="page-template-default page page-id-247 page-child parent-pageid-195 siteorigin-panels  fts-powered-by-text-popup"><div class="slicknav_menu"><a href="#" aria-haspopup="true" tabindex="0" class="slicknav_btn slicknav_collapsed"><span class="slicknav_menutxt">MENU</span><span class="slicknav_icon"><span class="slicknav_icon-bar"></span><span class="slicknav_icon-bar"></span><span class="slicknav_icon-bar"></span></span></a><ul class="slicknav_nav slicknav_hidden" aria-expanded="false" style="display: none;" aria-hidden="true" role="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://techwithtim.net/" role="menuitem" tabindex="-1">Home</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-25"><a title="tutorials" href="https://techwithtim.net/tutorials/" role="menuitem" tabindex="-1">Tutorials</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-28"><a title="community" href="https://techwithtim.net/community/" role="menuitem" tabindex="-1">Community</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2262"><a href="https://techwithtim.net/gear/" role="menuitem" tabindex="-1">My Gear</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3153"><a href="https://teespring.com/stores/tims-store-23" role="menuitem" tabindex="-1">Shop</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a title="support" href="https://techwithtim.net/support-donate/" role="menuitem" tabindex="-1">Support/Donate</a></li></ul></div><nav id="site-navigation" class="main-navigation" role="navigation"><div class="container"> <button class="menu-toggle" aria-controls="menu" aria-expanded="false">Primary Menu</button><div class="menu-main-container"><ul id="menu-main" class="menu nav-menu" aria-expanded="false"><li id="menu-item-156" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-156"><a href="https://techwithtim.net/">Home</a></li><li id="menu-item-25" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor menu-item-25"><a title="tutorials" href="https://techwithtim.net/tutorials/">Tutorials</a></li><li id="menu-item-28" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-28"><a title="community" href="https://techwithtim.net/community/">Community</a></li><li id="menu-item-2262" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2262"><a href="https://techwithtim.net/gear/">My Gear</a></li><li id="menu-item-3153" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3153"><a href="https://teespring.com/stores/tims-store-23">Shop</a></li><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a title="support" href="https://techwithtim.net/support-donate/">Support/Donate</a></li></ul></div></div></nav><header id="masthead" class="site-header" role="banner"><div class="header-image"><div class="site-branding container"><div id="text-title-desc"><h1 class="site-title title-font"><a href="https://techwithtim.net/" rel="home">techwithtim.net</a></h1><h2 class="site-description">Programming &amp; Tech Tutorials</h2></div></div><div class="search-wrapper"><div class="container"><div id="search-top" class="col-lg-6 col-md-6 col-sm-12 col-xs-12"><form method="get" id="searchform" action="https://techwithtim.net/"><div><input type="text" size="18" name="s" id="s"> <button type="submit" class="search-submit"> <i class="fa fa-search"></i> </button></div></form></div><div id="social-icons" class="col-md-6 col-s-6 col-xs-12"> <a href="https://www.youtube.com/techwithtim"><i class="social-icon fa fa-youtube"></i></a> <a href="https://twitter.com/TechWithTimm"><i class="social-icon fa fa-twitter"></i></a></div></div></div></div></header><div style="width: 100%; height: auto; clear: both; text-align: center;" class="google-auto-placed"><ins style="display: block; margin: 10px auto; background-color: transparent; height: 280px;" data-ad-format="auto" class="adsbygoogle adsbygoogle-noablate" data-ad-client="ca-pub-6240468619130074" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:1200px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:1200px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left: 0px; position: absolute; top: 0px; border: 0px none; width: 1200px; height: 280px; overflow: visible;" width="1200" height="280" frameborder="0"></iframe></ins></ins></ins></div><div id="page" class="hfeed site"> <a class="skip-link screen-reader-text" href="#content">Skip to content</a><div id="content" class="site-content container"><div id="primary-mono" class="content-area col-md-8"><main id="main" class="site-main" role="main"><article id="post-247" class="post-247 page type-page status-publish hentry"><header class="entry-header"><h1 class="entry-title">Tutorial #2</h1></header><div class="entry-content"><div id="pl-247" class="panel-layout"><div id="pg-247-0" class="panel-grid panel-no-style"><div id="pgc-247-0-0" class="panel-grid-cell"><div id="panel-247-0-0-0" class="so-panel widget widget_sow-editor panel-first-child panel-last-child" data-index="0"><div class="so-widget-sow-editor so-widget-sow-editor-base"><div class="siteorigin-widget-tinymce textwidget"><div class="youtube-subscribe-bar-container"><div class="embed-container"><iframe src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/W8xCUu_zlQs.html" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" width="640" height="360" frameborder="0"></iframe></div><div class="youtube-subscribe-bar" style="color: #ffffff;background-color: #1b1b1b;"><div>Subscribe to Tech With Tim!</div><div><iframe src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/subscribe_embed.html"></iframe></div><div class="clear"></div></div></div><h3>Drawing the Grid</h3><p>This
 function will simply draw the grey grid lines in the play area so that 
we can see which square our pieces are in. You may recall us calling 
this function in our draw_window function from the last tutorial.</p><p></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">draw_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">col</span><span style="color: #000000; font-weight: bold;">):</span>
<span style="color: #8f5902; font-style: italic;"># This function draws the grey grid lines that we see</span>
    <span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_x</span>
    <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">top_left_y</span>
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span><span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #ce5c00; font-weight: bold;">*</span><span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_width</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span> <span style="color: #ce5c00; font-weight: bold;">*</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">))</span>  <span style="color: #8f5902; font-style: italic;"># horizontal lines</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">col</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">draw</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">surface</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">128</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span> <span style="color: #ce5c00; font-weight: bold;">*</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span><span style="color: #000000; font-weight: bold;">),</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">sx</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span> <span style="color: #ce5c00; font-weight: bold;">*</span> <span style="color: #0000cf; font-weight: bold;">30</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">sy</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">play_height</span><span style="color: #000000; font-weight: bold;">))</span>  <span style="color: #8f5902; font-style: italic;"># vertical lines</span>
</pre></div><h3>Converting Shape Formats</h3><p>At this point in time 
each of our pieces is represented by a multidimensional list. We need 
something that can translate this list into a form that the computer can
 understand. Ideally given a shape format we want to convert it to a 
list of positions that we can then return. That is what <strong>convert_shape_format()</strong> will do for us.</p><p>If you'd like a detailed explanation of this code please watch the video starting at 4:30.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[]</span>
    <span style="color: #000000;">format</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">%</span> <span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)]</span>
 
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">line</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">format</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">row</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #204a87;">list</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">line</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">column</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">row</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">column</span> <span style="color: #ce5c00; font-weight: bold;">==</span> \<span style="color: #4e9a06;">'0\':</span>
                <span style="color: #000000;">positions</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">append</span><span style="color: #000000; font-weight: bold;">((</span><span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">shape</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">))</span>
 
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">enumerate</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">):</span>
        <span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">2</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">4</span><span style="color: #000000; font-weight: bold;">)</span>
 
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #000000;">positions</span>
</pre></div><p><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/adsbygoogle.js"></script><br> <ins class="adsbygoogle" style="display: block; text-align: center; height: 183px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="1147887376" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:183px;margin:0;padding:0;position:relative;visibility:visible;width:730px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:183px;margin:0;padding:0;position:relative;visibility:visible;width:730px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0px;width:730px;height:183px;" width="730" height="183" frameborder="0"></iframe></ins></ins></ins><br> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p><h3>Determine a Valid Space</h3><p>When we are moving and rotating our shape we need to make sure that it is moving into a valid space. We are going to use the <strong>valid_space()</strong>
 function to check this. This function will have two parameters: grid 
and shape. We will check the grid to ensure that the current position we
 are trying to move into is not occupied. We can do this by seeing if 
any of the positions in the grid that the shape is attempting to move 
into have a color. If they have a color other than black than that means
 they are occupied, otherwise they are free.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #000000;">accepted_positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[[(</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">10</span><span style="color: #000000; font-weight: bold;">)</span> <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">j</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">,</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">)]</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #0000cf; font-weight: bold;">20</span><span style="color: #000000; font-weight: bold;">)]</span>
    <span style="color: #000000;">accepted_positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">sub</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">accepted_positions</span> <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">j</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">sub</span><span style="color: #000000; font-weight: bold;">]</span>
    <span style="color: #000000;">formatted</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)</span>
 
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">formatted</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">accepted_positions</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">False</span>
 
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">True</span>
</pre></div><h3>Checking if We Lose the Game</h3><p>In order to end the game we need to constantly be checking if the user has lost the game. The <strong>check_lost()</strong>
 function will do this for us. We are simply going to check if any 
position in the given list is above the screen. If it is we have reached
 the top and therefore lost the game.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">check_lost</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">):</span>
    <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">positions</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pos</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&lt;</span> <span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">True</span>
    <span style="color: #204a87; font-weight: bold;">return</span> <span style="color: #3465a4;">False</span>
</pre></div><h3>Modifying the Game Loop</h3><p>Now we are going to add some code into game loop that will move our pieces down the screen at a certain time interval.</p><p>Look for the comments to see which code it new.<br></p><div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;"><pre style="margin: 0; border: 0px; line-height: 125%;"><span style="color: #204a87; font-weight: bold;">def</span> <span style="color: #000000;">main</span><span style="color: #000000; font-weight: bold;">():</span>
    <span style="color: #204a87; font-weight: bold;">global</span> <span style="color: #000000;">grid</span>

    <span style="color: #000000;">locked_positions</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">{}</span>  <span style="color: #8f5902; font-style: italic;"># (x,y):(255,0,0)</span>
    <span style="color: #000000;">grid</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">create_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span>
    <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
    <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>
    <span style="color: #000000;">current_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">next_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">clock</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">time</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">Clock</span><span style="color: #000000; font-weight: bold;">()</span>
    <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>

    <span style="color: #204a87; font-weight: bold;">while</span> <span style="color: #000000;">run</span><span style="color: #000000; font-weight: bold;">:</span>
        <span style="color: #8f5902; font-style: italic;"># -------NEW CODE---------</span>
        <span style="color: #000000;">fall_speed</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0.27</span>
        
        <span style="color: #000000;">grid</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">create_grid</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">)</span>
        <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get_rawtime</span><span style="color: #000000; font-weight: bold;">()</span>
        <span style="color: #000000;">clock</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">tick</span><span style="color: #000000; font-weight: bold;">()</span>
    
        <span style="color: #8f5902; font-style: italic;"># PIECE FALLING CODE</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">fall_time</span><span style="color: #ce5c00; font-weight: bold;">/</span><span style="color: #0000cf; font-weight: bold;">1000</span> <span style="color: #ce5c00; font-weight: bold;">&gt;=</span> <span style="color: #000000;">fall_speed</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #000000;">fall_time</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #0000cf; font-weight: bold;">0</span>
            <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">))</span> <span style="color: #204a87; font-weight: bold;">and</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">True</span>
        <span style="color: #8f5902; font-style: italic;"># --------END NEW CODE---------</span>

        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">event</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">get</span><span style="color: #000000; font-weight: bold;">():</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">QUIT</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
                <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">display</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">quit</span><span style="color: #000000; font-weight: bold;">()</span>
                <span style="color: #000000;">quit</span><span style="color: #000000; font-weight: bold;">()</span>

            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">type</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">KEYDOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_LEFT</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>

                <span style="color: #204a87; font-weight: bold;">elif</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_RIGHT</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">x</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                <span style="color: #204a87; font-weight: bold;">elif</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_UP</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #8f5902; font-style: italic;"># rotate shape</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">+</span> <span style="color: #0000cf; font-weight: bold;">1</span> <span style="color: #ce5c00; font-weight: bold;">%</span> <span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">rotation</span> <span style="color: #ce5c00; font-weight: bold;">-</span> <span style="color: #0000cf; font-weight: bold;">1</span> <span style="color: #ce5c00; font-weight: bold;">%</span> <span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">shape</span><span style="color: #000000; font-weight: bold;">)</span>

                <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">event</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">key</span> <span style="color: #ce5c00; font-weight: bold;">==</span> <span style="color: #000000;">pygame</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">K_DOWN</span><span style="color: #000000; font-weight: bold;">:</span>
                    <span style="color: #8f5902; font-style: italic;"># move shape down</span>
                    <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">+=</span> <span style="color: #0000cf; font-weight: bold;">1</span>
                    <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #204a87; font-weight: bold;">not</span> <span style="color: #000000;">valid_space</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">):</span>
                        <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">-=</span> <span style="color: #0000cf; font-weight: bold;">1</span>

        <span style="color: #8f5902; font-style: italic;"># -------NEW CODE--------</span>
        <span style="color: #000000;">shape_pos</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">convert_shape_format</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">current_piece</span><span style="color: #000000; font-weight: bold;">)</span>

        <span style="color: #8f5902; font-style: italic;"># add color of piece to the grid for drawing</span>
        <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">i</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #204a87;">range</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #204a87;">len</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">)):</span>
            <span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">i</span><span style="color: #000000; font-weight: bold;">]</span>
            <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">y</span> <span style="color: #ce5c00; font-weight: bold;">&gt;</span> <span style="color: #ce5c00; font-weight: bold;">-</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">:</span> <span style="color: #8f5902; font-style: italic;"># If we are not above the screen</span>
                <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">y</span><span style="color: #000000; font-weight: bold;">][</span><span style="color: #000000;">x</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span>
       <span style="color: #8f5902; font-style: italic;"># IF PIECE HIT GROUND</span>
       <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">change_piece</span><span style="color: #000000; font-weight: bold;">:</span>
            <span style="color: #204a87; font-weight: bold;">for</span> <span style="color: #000000;">pos</span> <span style="color: #204a87; font-weight: bold;">in</span> <span style="color: #000000;">shape_pos</span><span style="color: #000000; font-weight: bold;">:</span>
                <span style="color: #000000;">p</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">0</span><span style="color: #000000; font-weight: bold;">],</span> <span style="color: #000000;">pos</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #0000cf; font-weight: bold;">1</span><span style="color: #000000; font-weight: bold;">])</span>
                <span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">[</span><span style="color: #000000;">p</span><span style="color: #000000; font-weight: bold;">]</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">current_piece</span><span style="color: #ce5c00; font-weight: bold;">.</span><span style="color: #000000;">color</span>
            <span style="color: #000000;">current_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">next_piece</span>
            <span style="color: #000000;">next_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #000000;">get_shape</span><span style="color: #000000; font-weight: bold;">()</span>
            <span style="color: #000000;">change_piece</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>

        <span style="color: #8f5902; font-style: italic;">#-------END NEW CODE-------</span>

        <span style="color: #000000;">draw_window</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">win</span><span style="color: #000000; font-weight: bold;">,</span> <span style="color: #000000;">grid</span><span style="color: #000000; font-weight: bold;">)</span>

        <span style="color: #8f5902; font-style: italic;">#------NEW CODE--------</span>
        <span style="color: #8f5902; font-style: italic;"># Check if user lost</span>
        <span style="color: #204a87; font-weight: bold;">if</span> <span style="color: #000000;">check_lost</span><span style="color: #000000; font-weight: bold;">(</span><span style="color: #000000;">locked_positions</span><span style="color: #000000; font-weight: bold;">):</span>
            <span style="color: #000000;">run</span> <span style="color: #ce5c00; font-weight: bold;">=</span> <span style="color: #3465a4;">False</span>
        <span style="color: #8f5902; font-style: italic;">#------END NEW CODE--------</span>
</pre></div><p><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/adsbygoogle.js"></script><br> <ins class="adsbygoogle" style="display: block; text-align: center; height: 183px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="1147887376" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:183px;margin:0;padding:0;position:relative;visibility:visible;width:730px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:183px;margin:0;padding:0;position:relative;visibility:visible;width:730px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0px;width:730px;height:183px;" width="730" height="183" frameborder="0"></iframe></ins></ins></ins><br> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></p></div></div></div></div></div><div id="pg-247-1" class="panel-grid panel-no-style"><div id="pgc-247-1-0" class="panel-grid-cell"><div id="panel-247-1-0-0" class="so-panel widget widget_sow-button panel-first-child panel-last-child" data-index="1"><div class="so-widget-sow-button so-widget-sow-button-atom-2b32105bfde1"><div class="ow-button-base ow-button-align-center"> <a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-3" class="ow-icon-placement-right ow-button-hover"> <span> <span class="sow-icon-typicons" data-sow-icon="" style="color: #0a0a0a"></span> Tutorial #3 </span> </a></div></div></div></div></div></div></div><footer class="entry-footer"></footer></article></main></div><div id="secondary" class="widget-area col-md-4" role="complementary"><aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://techwithtim.net/"> <label> <span class="screen-reader-text">Search for:</span> <input type="search" class="search-field" placeholder="Search …" name="s"> </label> <input type="submit" class="search-submit" value="Search"></form></aside><aside id="custom_html-11" class="widget_text widget widget_custom_html"><h1 class="widget-title">Enroll In My Course</h1><div class="textwidget custom-html-widget"><a href="https://tech-with-tim.teachable.com/p/the-fundamentals-of-programming-with-python"><h3 style="color: 	#FFA500">The Fundementals of Programming w/ Python</h3></a></div></aside><aside id="nav_menu-16" class="widget widget_nav_menu"><h1 class="widget-title">Tutorials</h1><div class="menu-tetris-tutorial-container"><ul id="menu-tetris-tutorial" class="menu"><li id="menu-item-610" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-610"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-1/">Tutorial #1</a></li><li id="menu-item-611" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-611"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-2/" aria-current="page">Tutorial #2</a></li><li id="menu-item-612" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-612"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-3/">Tutorial #3</a></li><li id="menu-item-613" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-613"><a href="https://techwithtim.net/tutorials/game-development-with-python/tetris-pygame/tutorial-4/">Tutorial #4</a></li></ul></div></aside><aside id="custom_html-9" class="widget_text widget widget_custom_html"><div class="textwidget custom-html-widget"><script async="" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display: block; text-align: center; height: 292px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6240468619130074" data-ad-slot="2392953184" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:292px;margin:0;padding:0;position:relative;visibility:visible;width:350px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:292px;margin:0;padding:0;position:relative;visibility:visible;width:350px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;border:0px;width:350px;height:292px;" width="350" height="292" frameborder="0"></iframe></ins></ins></ins> <script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></aside></div></div></div><footer id="colophon" class="site-footer" role="contentinfo"><div class="site-info"> <a href="mailto:tim@techwithtim.net">Contact: tim@techwithtim.net</a> <a href="https://techwithtim.net/privacy-policy"> |  Privacy Policy  | </a> <a href="https://techwithtim.net/terms-of-service">Terms of Service</a></div></footer>  <script type="text/javascript">document.body.className = document.body.className.replace("siteorigin-panels-before-js","");</script> <script defer="defer" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/autoptimize_5d1d3b7ba95a7d784d590fa8ba2bd815.js"></script>
<ins class="adsbygoogle adsbygoogle-noablate" style="display: none !important;" data-adsbygoogle-status="done"><ins id="aswift_4_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><ins id="aswift_4_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_4" name="aswift_4" style="left:0;position:absolute;top:0;border:0px;width:0px;height:0px;" frameborder="0"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_6002493540043" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body><iframe id="google_esf" name="google_esf" src="Python%20Pygame%20Tetris%20Tutorial%20%232%20-%20techwithtim.net_files/zrt_lookup.html" style="display: none;" data-ad-client="ca-pub-6240468619130074"></iframe></html>
<!--Generated by Endurance Page Cache-->